<!--

  ctrlx-core-datalayer-request -- A node to read data from the datalayer.

-->
<script type="text/javascript">
  RED.nodes.registerType('ctrlx-core-datalayer-request', {
      category: 'ctrlX',
      color: '#C0DEED',
      icon: 'icons/core.png',
      defaults: {
        device: {type: 'ctrlx-core', required: true},
        method: {value: 'READ', required: true},
        url: {value: '', required: false},
        name: {value: ''}
      },
      inputs: 1,
      outputs: 1,
      paletteLabel: 'Data Layer Request',
      label: function() {
        if (this.name) {
          return this.name;
        } else if (this.url && this.method) {
          return this.method + ': ' + this.url;
        } else if (this.method && !this.url) {
          return this.method + ': <msg.topic>';
        } else {
          return 'Data Layer Request';
        }
      }
  });
</script>


<script type="text/html" data-template-name="ctrlx-core-datalayer-request">
  <div class="form-row">
    <label for="node-input-device"><i class="fa fa-sign-in"></i> Device</label>
    <input type="text" id="node-input-device">
  </div>

  <div class="form-row">
    <label for="node-input-method"><i class="fa fa-tasks"></i> Method</label>
    <select type="text" id="node-input-method" style="width:70%;">
    <option value="READ">READ</option>
    <option value="WRITE">WRITE</option>
    <option value="BROWSE">BROWSE</option>
    <option value="METADATA">METADATA</option>
    <option value="REFERENCES">REFERENCES</option>
    </select>
  </div>

  <div class="form-row">
    <label for="node-input-url"><i class="fa fa-globe"></i> URL</label>
    <input id="node-input-url" type="text" placeholder="framework/metrics/system/cpu-utilisation-percent">
  </div>

  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
</script>


<script type="text/html" data-help-name="ctrlx-core-datalayer-request">
  <p>Use this node to read or write data to the ctrlX CORE Data Layer.</p>
</script>
